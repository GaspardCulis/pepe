---
export interface Props {
    selected_page: number;
}

const { selected_page } = Astro.props;

const pages = [
    { name: "Accueil", url: "/index.html" },
    { name: "Biographie", url: "/biography" },
    { name: "Galerie", url: "/galery" },
    { name: "TÃ©moignages", url: "/testimony" },
];
---

<header>
    <nav class="bg-black px-4 sm:px-6 py-2.5 lg:py-4">
        <div
            class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl"
        >
            <div class="flex items-center sm:order-2">
                <button
                    data-collapse-toggle="mobile-menu-2"
                    type="button"
                    class="inline-flex items-center p-2 ml-1 text-sm text-white rounded-lg sm:hidden hover:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-gray-800"
                    aria-controls="mobile-menu-2"
                    aria-expanded="false"
                >
                    <span class="sr-only">Open main menu</span>
                    <svg
                        class="w-6 h-6 mobile-menu-toggle"
                        fill="currentColor"
                        viewBox="0 0 20 20"
                        xmlns="http://www.w3.org/2000/svg"
                        ><path
                            fill-rule="evenodd"
                            d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z"
                            clip-rule="evenodd"></path></svg
                    >
                    <svg
                        class="hidden w-6 h-6 mobile-menu-toggle"
                        fill="currentColor"
                        viewBox="0 0 20 20"
                        xmlns="http://www.w3.org/2000/svg"
                        ><path
                            fill-rule="evenodd"
                            d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                            clip-rule="evenodd"></path></svg
                    >
                </button>
            </div>
            <div
                class="hidden justify-between items-center w-full sm:flex sm:w-auto sm:order-1 m-auto mobile-menu-toggle"
                id="mobile-menu-2"
            >
                <ul
                    class="load-animate flex flex-col mt-4 font-medium sm:flex-row sm:space-x-8 md:space-x-16 lg:space-x-24 sm:mt-0"
                >
                    {
                        pages.map((page, index) => (
                            <>
                                {index == selected_page ? (
                                    <li>
                                        <a
                                            href={page["url"]}
                                            class="block py-2 pr-4 pl-3 text-white text-lg lg:text-xl rounded bg-gray-900 sm:bg-transparent sm:text-orange-300 sm:p-0 font-bold"
                                            aria-current="page"
                                        >
                                            {page["name"]}
                                        </a>
                                    </li>
                                ) : (
                                    <li>
                                        <a
                                            href={page["url"]}
                                            class="block py-2 pr-4 pl-3 text-white text-lg lg:text-xl hover:bg-gray-900 rounded sm:hover:bg-transparent sm:hover:text-orange-300 sm:p-0"
                                        >
                                            {page["name"]}
                                        </a>
                                    </li>
                                )}
                            </>
                        ))
                    }
                </ul>
            </div>
        </div>
    </nav>
    <div class="h-fit -z-10 down-gradient overflow-visible">
        <div
            class="bg-black w-full h-full absolute z-10 load-animate"
            id="black-overlay"
        >
        </div>
        <div class="h-full w-full flex flex-col justify-center absolute p-10">
            <h1
                class="text-white text-6xl sm:text-8xl md:text-9xl load-animate"
            >
                Daniel Culis
            </h1>
            <h2
                class="text-white text-4xl sm:text-5xl md:text-6xl load-animate"
            >
                potier d'art
            </h2>
        </div>
        <img
            src="/img/giga_jarre.jpg"
            class="w-full -z-10"
            style="transform: translateZ(-10px)"
        />
    </div>
</header>

<script>
    document
        .getElementsByTagName("button")[0]
        .addEventListener("click", (event) => {
            document.querySelectorAll(".mobile-menu-toggle").forEach((e) => {
                e.classList.toggle("hidden");
            });
        });

    // Check Needs Animation
    if (new URL(document.URL).pathname != "/")
        document
            .querySelectorAll(".load-animate")
            .forEach((e) => e.classList.toggle("load-animate"));
</script>

<style>
    @import url("https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap");

    .down-gradient {
        background-image: linear-gradient(
            to top,
            rgba(0, 0, 0, 0.2) 10%,
            rgba(0, 0, 0, 1)
        );
        transform-style: preserve-3d;
    }

    h1 {
        font-family: "Great Vibes", cursive;
    }

    #black-overlay:not(.load-animate) {
        visibility: hidden;
    }

    @media screen and (min-width: 1030px) {
        #black-overlay.load-animate {
            animation: reveal 3s linear forwards;
        }

        h1.load-animate {
            opacity: 0;
            animation: reveal 3s linear reverse forwards;
            animation-delay: 1s;
        }

        h2.load-animate {
            opacity: 0;
            animation: reveal 3s linear reverse forwards;
            animation-delay: 3s;
        }

        ul.load-animate {
            opacity: 0;
            animation: reveal 2s linear reverse forwards;
            animation-delay: 4s;
        }

        @keyframes reveal {
            0% {
                opacity: 1;
            }
            100% {
                opacity: 0;
                visibility: hidden;
            }
        }
    }
    @media screen and (max-width: 1030px) {
        #black-overlay {
            visibility: hidden;
        }
    }
</style>
